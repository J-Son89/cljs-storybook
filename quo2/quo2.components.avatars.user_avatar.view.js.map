{"version":3,"sources":["quo2/components/avatars/user_avatar/view.cljs"],"mappings":"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","names":["quo2.components.avatars.user-avatar.view/trim-whitespace","s","clojure.string/join","clojure.string/split","clojure.string/trim","quo2.components.avatars.user-avatar.view/extract-initials","full-name","amount-initials","upper-case-first-letter","cljs.core/comp","clojure.string/upper-case","cljs.core/first","names-list","cljs.core/=","cljs.core/map","cljs.core/take","p__16610","map__16611","cljs.core/PROTOCOL_SENTINEL","cljs.core/apply","cljs.core/hash-map","cljs.core/get","quo2.components.avatars.user-avatar.view/initials-avatar","size","draw-ring?","customization-color","font-size","cljs.core/get-in","quo2.components.avatars.user-avatar.style/sizes","react-native.core/view","quo2.components.avatars.user-avatar.style/initials-avatar","quo2.components.markdown.text/text","quo2.components.avatars.user-avatar.style/initials-avatar-text","quo2.components.avatars.user-avatar.view/valid-ring-sizes","p__16616","map__16617","quo2.components.avatars.user-avatar.view/user-avatar","status-indicator?","online?","profile-picture","ring-background","static?","muted?","or__4126__auto__","and__4115__auto__","outer-styles","quo2.components.avatars.user-avatar.style/outer","image-view","react-native.core/image","react-native.fast-image/fast-image","temp__5735__auto__","image","quo2.components.avatars.user-avatar.style/dot","quo2.components.avatars.user-avatar.style/inner-dot"],"sourcesContent":["(ns quo2.components.avatars.user-avatar.view\n  (:require [clojure.string :as string]\n            [quo2.components.avatars.user-avatar.style :as style]\n            [quo2.components.markdown.text :as text]\n            [react-native.core :as rn]\n            [react-native.fast-image :as fast-image]))\n\n(defn trim-whitespace [s] (string/join \" \" (string/split (string/trim s) #\"\\s+\")))\n\n(defn- extract-initials\n  [full-name amount-initials]\n  (let [upper-case-first-letter (comp string/upper-case first)\n        names-list              (string/split (trim-whitespace full-name) \" \")]\n    (if (= (first names-list) \"\")\n      \"\"\n      (->> names-list\n           (map upper-case-first-letter)\n           (take amount-initials)\n           (string/join)))))\n\n(defn initials-avatar\n  [{:keys [full-name size draw-ring? customization-color]}]\n  (let [font-size       (get-in style/sizes [size :font-size])\n        amount-initials (if (#{:xs :xxs :xxxs} size) 1 2)]\n    [rn/view\n     {:accessibility-label :initials-avatar\n      :style               (style/initials-avatar size draw-ring? customization-color)}\n     [text/text\n      {:style  style/initials-avatar-text\n       :size   font-size\n       :weight :semi-bold}\n      (extract-initials full-name amount-initials)]]))\n\n(def valid-ring-sizes #{:big :medium :small})\n\n(defn user-avatar\n  \"If no `profile-picture` is given, draws the initials based on the `full-name` and\n  uses `ring-background` to display the ring behind the initials when given. Otherwise,\n  shows the `profile-picture` which already comes with the ring drawn.\"\n  [{:keys [full-name status-indicator? online? size profile-picture ring-background\n           customization-color static? muted?]\n    :or   {status-indicator?   true\n           online?             true\n           size                :big\n           customization-color :turquoise}}]\n  (let [full-name    (or full-name \"empty name\")\n        draw-ring?   (when-not muted? (and ring-background (valid-ring-sizes size)))\n        outer-styles (style/outer size)\n        ;; Once image is loaded, fast image rerenders view with the help of reagent atom,\n        ;; But dynamic updates don't work when user-avatar is used inside hole-view\n        ;; https://github.com/status-im/status-mobile/issues/15553\n        image-view   (if static? rn/image fast-image/fast-image)]\n    [rn/view {:style outer-styles :accessibility-label :user-avatar}\n     ;; The `profile-picture` already has the ring in it\n     (when-let [image (or profile-picture ring-background)]\n       [image-view\n        {:accessibility-label (if draw-ring? :ring-background :profile-picture)\n         :style               outer-styles\n         :source              image}])\n     (when-not profile-picture\n       [initials-avatar\n        {:full-name           full-name\n         :size                size\n         :draw-ring?          draw-ring?\n         :customization-color customization-color}])\n     (when status-indicator?\n       [rn/view\n        {:accessibility-label :status-indicator\n         :style               (style/dot size draw-ring?)}\n        [rn/view\n         {:accessibility-label :inner-status-indicator-dot\n          :style               (style/inner-dot size online?)}]])]))\n"]}