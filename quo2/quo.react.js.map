{"version":3,"sources":["quo/react.cljs"],"mappings":"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","names":["quo.react/create-ref","js/shadow.js.shim.module$react.createRef","quo.react/current-ref","ref","target-obj-17333","*runtime-state*-orig-val__17335","oops.state/*runtime-state*","*runtime-state*-temp-val__17336","oops.state/prepare-state","js/Error","next-obj-17334","oops.core/validate-object-access-dynamically","quo.react/set-ref-val!","val","target-obj-17343","*runtime-state*-orig-val__17345","*runtime-state*-temp-val__17346","parent-obj-17344","quo.react/set-native-props","props","temp__5735__auto__","curr-ref","this__4369__auto__","writer__4370__auto__","opt__4371__auto__","cljs.core/-write","quo.react/StateHook","quo.react/->StateHook","value","set-value","o","goog/getUid","_o","new-value","f","a","p1__17350#","b","p1__17351#","xs","p1__17352#","cljs.core/apply","quo.react/state","vec__17358","cljs.core/nth","js/shadow.js.shim.module$react.useState","sh","js/shadow.js.shim.module$react.useMemo","quo.react/use-ref","js/shadow.js.shim.module$react.useRef","js/quo","js/quo.react","js/quo.react.t_quo$react17361","quo.react/t_quo$react17361","_17363","meta17362","quo.react/->t_quo$react17361","_","cljs.core/-reset!","quo.react/ref","vref","var_args","G__17386","quo.react/effect!","setup-fn","js/shadow.js.shim.module$react.useEffect","ret","cljs.core/fn?","js/undefined","deps","cljs.core/not=","cljs.core/deref","cljs.core/reset!","prev-deps*","cljs.core/into-array","G__17394","quo.react/layout-effect!","js/shadow.js.shim.module$react.useLayoutEffect","G__17399","quo.react/callback","js/shadow.js.shim.module$react.useCallback","G__17409","quo.react/use-memo","quo.react/memo","js/shadow.js.shim.module$react.memo","quo.react/get-children","children","js/shadow.js.shim.module$react.Children.toArray","cljs.core/into"],"sourcesContent":["(ns quo.react\n  (:refer-clojure :exclude [ref])\n  (:require [\"react\" :as react]\n            [oops.core :refer [oget oset!]])\n  (:require-macros [quo.react :refer [with-deps-check maybe-js-deps]]))\n\n(def create-ref react/createRef)\n\n(defn current-ref\n  [ref]\n  (oget ref \"current\"))\n\n;; Inspired from UIX, Rum and Rumext\n(defn set-ref-val!\n  [ref val]\n  (oset! ref \"current\" val)\n  val)\n\n(defn set-native-props\n  [^js ref ^js props]\n  (when-let [curr-ref ^js (current-ref ref)]\n    (.setNativeProps curr-ref props)))\n\n(deftype StateHook [value set-value]\n  cljs.core/IHash\n    (-hash [o] (goog/getUid o))\n\n  cljs.core/IDeref\n    (-deref [_o]\n      value)\n\n  cljs.core/IReset\n    (-reset! [_o new-value]\n      (set-value new-value))\n\n  cljs.core/ISwap\n    (-swap! [_o f]\n      (set-value f))\n    (-swap! [_o f a]\n      (set-value #(f % a)))\n    (-swap! [_o f a b]\n      (set-value #(f % a b)))\n    (-swap! [_o f a b xs]\n      (set-value #(apply f % a b xs))))\n\n(defn state\n  [value]\n  (let [[value set-value] (react/useState value)\n        sh                (react/useMemo #(StateHook. value set-value) #js [])]\n    (react/useMemo (fn []\n                     (set! (.-value sh) value)\n                     (set! (.-set-value sh) set-value)\n                     sh)\n                   #js [value set-value])))\n\n(defn use-ref\n  [val]\n  (let [ref (react/useRef val)]\n    (reify\n     cljs.core/IHash\n       (-hash [_] (goog/getUid ref))\n\n     cljs.core/IDeref\n       (-deref [_]\n         (current-ref ref))\n\n     cljs.core/IReset\n       (-reset! [_ new-value]\n         (set-ref-val! ref new-value))\n\n     cljs.core/ISwap\n       (-swap! [_ f]\n         (-reset! ref (f (current-ref ref))))\n       (-swap! [_ f a]\n         (-reset! ref (f (current-ref ref) a)))\n       (-swap! [_ f a b]\n         (-reset! ref (f (current-ref ref) a b)))\n       (-swap! [_ f a b xs]\n         (-reset! ref (apply f (current-ref ref) a b xs))))))\n\n(defn ref\n  [value]\n  (let [vref (use-ref value)]\n    (react/useMemo (fn [] vref) #js [])))\n\n(defn effect!\n  ([setup-fn]\n   (react/useEffect\n    #(let [ret (setup-fn)]\n       (if (fn? ret) ret js/undefined))))\n  ([setup-fn deps]\n   (with-deps-check [prev-deps*]\n     (react/useEffect\n      (fn []\n        (reset! prev-deps* deps)\n        (let [ret (setup-fn)]\n          (if (fn? ret) ret js/undefined)))\n      (maybe-js-deps @prev-deps*))\n     deps)))\n\n(defn layout-effect!\n  ([setup-fn]\n   (react/useLayoutEffect\n    #(let [ret (setup-fn)]\n       (if (fn? ret) ret js/undefined))))\n  ([setup-fn deps]\n   (with-deps-check [prev-deps*]\n     (react/useLayoutEffect\n      (fn []\n        (reset! prev-deps* deps)\n        (let [ret (setup-fn)]\n          (if (fn? ret) ret js/undefined)))\n      (maybe-js-deps @prev-deps*))\n     deps)))\n\n(defn callback\n  ([f] (react/useCallback f))\n  ([f deps]\n   (with-deps-check [prev-deps*]\n     (react/useCallback f (maybe-js-deps @prev-deps*))\n     deps)))\n\n(defn use-memo\n  ([f] (react/useMemo f))\n  ([f deps]\n   (with-deps-check [prev-deps*]\n     (react/useMemo f (maybe-js-deps @prev-deps*))\n     deps)))\n\n(def memo react/memo)\n\n(defn get-children\n  [^js children]\n  (->> children\n       (react/Children.toArray)\n       (into [])))\n"]}