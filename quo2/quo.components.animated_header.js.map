{"version":3,"sources":["quo/components/animated_header.cljs"],"mappings":"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","names":["p__19125","map__19126","cljs.core/PROTOCOL_SENTINEL","cljs.core/apply","cljs.core/hash-map","cljs.core/get","quo.components.animated-header/header-wrapper-style","value","offset","cljs.core/merge","cljs.core/deref","quo.design-system.colors/theme","and__4115__auto__","quo.platform/android?","quo.animated/interpolate","quo.animated/extrapolate","quo.platform/ios?","quo.components.animated-header/title-style","layout","cljs.core/get-in","quo.components.animated-header/header-container","y","quo.animated/value","animation-value","animation","quo.animated/with-timing-transition","quo.animated/easings","on-scroll","quo.animated/on-scroll","reagent.core/atom","on-layout","evt","cljs.core/reset!","target-obj-19132","*runtime-state*-orig-val__19139","oops.state/*runtime-state*","*runtime-state*-temp-val__19140","oops.state/prepare-state","js/Error","next-obj-19133","oops.core/validate-object-access-dynamically","next-obj-19134","next-obj-19135","p__19147","map__19148","extended-header","refresh-control","refreshing-sub","refreshing-counter","props","children","quo.animated/view","quo.animated/code","quo.animated/cond*","quo.animated/and*","quo.animated/greater-or-eq","quo.animated/set","quo.components.header/header","el","l","cljs.core/swap!","cljs.core/assoc","cljs.core/dissoc","cljs.core/into","quo.animated/scroll-view","var_args","args__4742__auto__","len__4736__auto__","i__4737__auto__","argseq__4743__auto__","cljs.core/IndexedSeq","quo.components.animated-header/header","p__19187","map__19189","seq19153","G__19158","cljs.core/first","cljs.core/next","self__4723__auto__","use-insets","react-native.safe-area/get-insets"],"sourcesContent":["(ns quo.components.animated-header\n  (:require [oops.core :refer [oget]]\n            [quo.animated :as animated]\n            [quo.components.header :as header]\n            [quo.design-system.colors :as colors]\n            [quo.platform :as platform]\n            [reagent.core :as reagent]\n            [react-native.safe-area :as safe-area]))\n\n(defn header-wrapper-style\n  [{:keys [value offset]}]\n  (merge\n   {:background-color (:ui-background @colors/theme)}\n   (when (and offset platform/android?)\n     {:elevation (animated/interpolate\n                  value\n                  {:inputRange  [0 offset]\n                   :outputRange [0 4]\n                   :extrapolate (:clamp animated/extrapolate)})})\n   (when (and offset platform/ios?)\n     {:z-index        2\n      :shadow-opacity (animated/interpolate\n                       value\n                       {:inputRange  [0 offset]\n                        :outputRange [0 1]\n                        :extrapolate (:clamp animated/extrapolate)})\n      :shadow-radius  16\n      :shadow-color   (:shadow-01 @colors/theme)\n      :shadow-offset  {:width 0 :height 4}})))\n\n(defn title-style\n  [layout]\n  {:flex            1\n   :justify-content :center\n   :padding-right   (get-in layout [:right :width])})\n\n(defn header-container\n  []\n  (let [y               (animated/value 0)\n        animation-value (animated/value 0)\n        animation       (animated/with-timing-transition\n                         animation-value\n                         {:duration 250\n                          :easing   (:ease-in animated/easings)})\n        on-scroll       (animated/on-scroll {:y y})\n        layout          (reagent/atom {})\n        offset          (reagent/atom 0)\n        on-layout       (fn [evt]\n                          (reset! offset (oget evt \"nativeEvent\" \"layout\" \"height\")))]\n    (fn [{:keys [extended-header refresh-control refreshing-sub refreshing-counter] :as props} children]\n      [animated/view\n       {:flex           1\n        :pointer-events :box-none}\n       [animated/code\n        {:key  (str @offset)\n         :exec (animated/cond*\n                (animated/and* (animated/greater-or-eq y @offset)\n                               (animated/greater-or-eq y 1))\n                (animated/set animation-value 1)\n                (animated/set animation-value 0))}]\n       [animated/view\n        {:pointer-events :box-none\n         :style          (header-wrapper-style {:value  y\n                                                :offset @offset})}\n        [header/header\n         (merge\n          {:get-layout      (fn [el l] (swap! layout assoc el l))\n           :border-bottom   false\n           :title-component [animated/view {:style (title-style @layout)}\n                             [extended-header\n                              {:value     y\n                               :animation animation\n                               :minimized true\n                               :offset    @offset}]]\n           :title-align     :left}\n          (dissoc props :extended-header))]]\n       (into [animated/scroll-view\n              {:on-scroll           on-scroll\n               :refreshControl      (when refresh-control\n                                      (refresh-control\n                                       (and @refreshing-sub\n                                            @refreshing-counter)))\n               :style               {:z-index 1}\n               :scrollEventThrottle 16}\n              [animated/view {:pointer-events :box-none}\n               [animated/view\n                {:pointer-events :box-none\n                 :on-layout      on-layout}\n                [extended-header\n                 {:value     y\n                  :animation animation\n                  :offset    @offset}]]]]\n             children)])))\n\n(defn header\n  [{:keys [use-insets] :as props} & children]\n  (if use-insets\n    [header-container\n     (-> props\n         (dissoc :use-insets)\n         (assoc :insets (safe-area/get-insets)))\n     children]\n    [header-container props children]))\n"]}